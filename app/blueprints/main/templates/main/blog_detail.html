{% extends "main/base.html" %}

{% block title %}{{ post.title }} | æ–°æ½Ÿå¿ƒç†ç™‚æ³•åŒå¥½ä¼š{% endblock %}

{% block main_content %}
<!-- BREADCRUMB -->
<div
    class="bg-custom-surface-2 border-b border-custom-border-light text-[11px] text-custom-text-muted font-mono-dm py-3">
    <div class="inner flex items-center gap-2">
        <a href="/" class="hover:text-custom-accent transition-colors">HOME</a>
        <span>/</span>
        <a href="{{ url_for('main.blog_list') }}" class="hover:text-custom-accent transition-colors">BLOG</a>
        <span>/</span>
        <span class="text-custom-accent font-medium truncate max-w-[200px]">{{ post.title }}</span>
    </div>
</div>

<!-- ARTICLE HERO -->
<section class="border-b border-custom-border">
    <div
        class="relative h-64 md:h-80 bg-gradient-to-br from-custom-wireframe-img to-custom-surface-3 flex items-center justify-center overflow-hidden">
        {% if post.eyecatch_img %}
        <img src="{{ url_for('static', filename='uploads/eyecatch/' + post.eyecatch_img) }}" alt="{{ post.title }}"
            class="w-full h-full object-cover opacity-60">
        {% else %}
        <div class="text-custom-text-muted font-mono-dm text-2xl">No Image</div>
        {% endif %}
    </div>
    <div class="inner py-10 md:py-14">
        <div class="flex flex-wrap gap-2 mb-4">
            <span class="ph-tag">{{ post.category.name }}</span>
        </div>
        <h1
            class="font-header-sans font-bold text-3xl md:text-4xl text-custom-text-primary leading-tight max-w-3xl mb-6">
            {{ post.title }}
        </h1>
        <div class="flex flex-wrap items-center gap-4">
            <div
                class="flex items-center gap-3 bg-white border border-custom-border rounded-full pr-4 pl-1 py-1 shadow-custom-sm">
                <div
                    class="w-10 h-10 bg-custom-wireframe-img rounded-full border border-custom-border flex items-center justify-center text-xs text-custom-text-muted overflow-hidden">
                    ğŸ‘¤
                </div>
                <div class="flex flex-col">
                    <span class="text-xs font-bold text-custom-text-primary leading-none mb-1">{{
                        post.author.name }}</span>
                    <span class="text-[9px] text-custom-text-muted font-mono-dm leading-none">AUTHOR</span>
                </div>
            </div>
            <div class="flex items-center gap-2 text-[11px] text-custom-text-muted font-mono-dm">
                <span>{{ post.published_at.strftime('%Y.%m.%d') }}</span>
            </div>
        </div>
    </div>
</section>

<!-- MAIN LAYOUT -->
<div class="inner grid grid-cols-1 md:grid-cols-3 gap-0">
    <!-- ARTICLE CONTENT -->
    <article class="md:col-span-2 py-10 md:py-16 md:pr-12 md:border-r border-custom-border-light flex flex-col gap-8">
        <div class="flex flex-col gap-6 text-base leading-loose text-custom-text-secondary">
            {{ post.content | safe }}
        </div>

        <!-- SHARE -->
        <div class="mt-8 p-6 bg-custom-surface-2 border border-custom-border rounded-custom flex items-center gap-4">
            <span class="text-[10px] text-custom-text-muted font-mono-dm uppercase tracking-widest">Share this
                article</span>
            <div class="flex gap-2">
                <button
                    class="bg-white border border-custom-border rounded-lg px-4 py-2 text-xs font-semibold hover:border-custom-accent transition-colors">X
                    (Twitter)</button>
                <button
                    class="bg-white border border-custom-border rounded-lg px-4 py-2 text-xs font-semibold hover:border-custom-accent transition-colors">Facebook</button>
            </div>
        </div>

        <!-- NEXT/PREV -->
        <div class="grid grid-cols-2 gap-4 mt-8">
            <a href="#"
                class="group p-4 bg-custom-surface-2 border border-custom-border rounded-custom flex flex-col gap-2 hover:border-custom-accent transition-colors">
                <span class="text-[9px] text-custom-text-muted font-mono-dm">PREVIOUS</span>
                <span
                    class="text-sm font-bold group-hover:text-custom-accent transition-colors line-clamp-1">èªçŸ¥è¡Œå‹•ç™‚æ³•ã®åŸºç¤...</span>
            </a>
            <a href="#"
                class="group p-4 bg-custom-surface-2 border border-custom-border rounded-custom flex flex-col gap-2 text-right hover:border-custom-accent transition-colors">
                <span class="text-[9px] text-custom-text-muted font-mono-dm">NEXT</span>
                <span
                    class="text-sm font-bold group-hover:text-custom-accent transition-colors line-clamp-1">ãƒã‚¤ãƒ³ãƒ‰ãƒ•ãƒ«ãƒã‚¹ã®å®Ÿè·µ...</span>
            </a>
        </div>

        <!-- COMMENTS -->
        <div class="mt-16 border-t border-custom-border-light pt-12 flex flex-col gap-10">
            <div class="flex items-center gap-4">
                <h3 class="font-header-sans font-bold text-2xl text-custom-text-primary leading-none">Comments
                </h3>
                <span
                    class="bg-custom-accent text-white rounded-full px-3 py-1 text-[11px] font-mono-dm font-bold">3</span>
            </div>

            <div class="flex flex-col">
                <!-- Comment 1 -->
                <div class="py-6 border-b border-custom-border-light flex flex-col gap-4">
                    <div class="flex items-center gap-3">
                        <div
                            class="w-8 h-8 bg-custom-wireframe-img rounded-full border border-custom-border flex items-center justify-center text-xs">
                            ğŸ‘¤</div>
                        <div class="flex flex-col">
                            <span class="text-sm font-bold text-custom-text-primary">ä½è—¤ å¥</span>
                            <span
                                class="text-[10px] text-custom-text-muted font-mono-dm uppercase tracking-wider">2025.02.19</span>
                        </div>
                    </div>
                    <div class="pl-11 text-sm text-custom-text-secondary">
                        ãƒ†ã‚­ã‚¹ãƒˆãƒ†ã‚­ã‚¹ãƒˆãƒ†ã‚­ã‚¹ãƒˆãƒ†ã‚­ã‚¹ãƒˆãƒ†ã‚­ã‚¹ãƒˆãƒ†ã‚­ã‚¹ãƒˆãƒ†ã‚­ã‚¹ãƒˆãƒ†ã‚­ã‚¹ãƒˆãƒ†ã‚­ã‚¹ãƒˆãƒ†ã‚­ã‚¹ãƒˆãƒ†ã‚­ã‚¹ãƒˆã€‚
                    </div>
                    <div class="pl-11 flex gap-2">
                        <button
                            class="text-[10px] py-1.5 px-3 bg-white border border-custom-border rounded-lg font-mono-dm hover:border-custom-accent transition-colors">REPLY</button>
                        <button
                            class="text-[10px] py-1.5 px-3 bg-white border border-custom-border rounded-lg font-mono-dm hover:border-custom-accent transition-colors flex items-center gap-1">
                            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5"
                                stroke="currentColor" class="w-3 h-3">
                                <path stroke-linecap="round" stroke-linejoin="round"
                                    d="M12 20.25c4.97 0 9-3.694 9-8.25s-4.03-8.25-9-8.25S3 7.444 3 12c0 2.104.859 4.023 2.273 5.48.432.447.74 1.04.586 1.641a4.483 4.483 0 0 1-.923 1.785A5.969 5.969 0 0 0 6 21c1.282 0 2.47-.402 3.445-1.087.81.22 1.668.337 2.555.337Z" />
                            </svg>
                            1
                        </button>
                    </div>
                </div>

                <!-- Comment Form -->
                <div
                    class="mt-12 p-8 bg-custom-surface-2 border border-custom-border rounded-custom flex flex-col gap-6">
                    <h4 class="font-header-sans font-bold text-xl text-custom-text-primary">Leave a Comment</h4>
                    <div class="grid grid-cols-2 gap-4">
                        <div class="flex flex-col gap-2">
                            <label
                                class="text-[11px] font-bold text-custom-text-secondary uppercase tracking-widest font-mono-dm">Name</label>
                            <input type="text"
                                class="h-10 px-4 bg-white border border-custom-border rounded-lg focus:outline-none focus:border-custom-accent transition-colors">
                        </div>
                        <div class="flex flex-col gap-2">
                            <label
                                class="text-[11px] font-bold text-custom-text-secondary uppercase tracking-widest font-mono-dm">Email</label>
                            <input type="email"
                                class="h-10 px-4 bg-white border border-custom-border rounded-lg focus:outline-none focus:border-custom-accent transition-colors">
                        </div>
                    </div>
                    <div class="flex flex-col gap-2">
                        <label
                            class="text-[11px] font-bold text-custom-text-secondary uppercase tracking-widest font-mono-dm">Message</label>
                        <textarea
                            class="h-32 p-4 bg-white border border-custom-border rounded-lg focus:outline-none focus:border-custom-accent transition-colors resize-none"></textarea>
                    </div>
                    <button class="ph-btn-primary self-start px-8">Post Comment</button>
                </div>
            </div>
        </div>
    </article>

    <!-- SIDEBAR -->
    <aside class="py-10 md:py-16 md:pl-10 flex flex-col gap-10">
        <!-- Profile Widget -->
        <div
            class="p-6 bg-white border border-custom-border rounded-custom shadow-custom-sm flex flex-col gap-4 text-center items-center">
            <div
                class="w-20 h-20 bg-custom-wireframe-img rounded-full border border-custom-border flex items-center justify-center text-3xl mb-2">
                ğŸ‘¤</div>
            <div class="flex flex-col gap-1">
                <span class="font-header-sans font-bold text-lg text-custom-text-primary leading-none">å±±ç”°
                    å¤ªéƒ</span>
                <span class="text-[10px] text-custom-accent font-mono-dm font-bold uppercase tracking-widest">Clinical
                    Psychologist</span>
            </div>
            <p class="text-xs text-custom-text-secondary leading-normal">
                æ–°æ½Ÿã‚’ä¸­å¿ƒã«æ´»å‹•ã™ã‚‹è‡¨åºŠå¿ƒç†å£«ã§ã™ã€‚å°‚é–€ã¯èªçŸ¥è¡Œå‹•ç™‚æ³•ã§ã€æ—¥ã€…ã‚¯ãƒ©ã‚¤ã‚¨ãƒ³ãƒˆã®çš†ã•ã‚“ã¨å…±ã«å¯¾è©±ã‚’è¡Œã£ã¦ã„ã¾ã™ã€‚
            </p>
        </div>

        <!-- Recent Articles Widget -->
        <div class="flex flex-col gap-6">
            <div class="section-label">RECENT ARTICLES</div>
            <div class="flex flex-col gap-6">
                {% for recent_post in recent_posts %}
                <a href="{{ url_for('main.blog_detail', id=recent_post.id) }}" class="group flex gap-4 items-start">
                    <div
                        class="w-16 h-16 bg-custom-wireframe-img border border-custom-border rounded-lg shrink-0 overflow-hidden">
                        {% if recent_post.eyecatch_img %}
                        <img src="{{ url_for('static', filename='uploads/eyecatch/' + recent_post.eyecatch_img) }}"
                            class="w-full h-full object-cover">
                        {% else %}
                        <div class="w-full h-full flex items-center justify-center text-[9px] text-custom-text-muted">
                            No Img</div>
                        {% endif %}
                    </div>
                    <div class="flex flex-col gap-1">
                        <span class="text-[9px] text-custom-text-muted font-mono-dm">{{
                            recent_post.published_at.strftime('%Y.%m.%d') }}</span>
                        <span
                            class="text-xs font-bold text-custom-text-primary group-hover:text-custom-accent transition-colors line-clamp-2 leading-tight">{{
                            recent_post.title }}</span>
                    </div>
                </a>
                {% endfor %}
            </div>
        </div>

        <!-- Categories Widget -->
        <div class="flex flex-col gap-6">
            <div class="section-label">CATEGORIES</div>
            <div class="flex flex-col border border-custom-border rounded-custom overflow-hidden bg-white">
                {% for category in categories %}
                <a href="{{ url_for('main.blog_list', category=category.slug) }}"
                    class="px-5 py-3 text-xs font-bold text-custom-text-primary border-b border-custom-border-light flex items-center justify-between hover:bg-custom-surface-2 transition-colors">
                    <span>{{ category.name }}</span>
                    <!-- <span class="text-[10px] text-custom-text-muted font-mono-dm">0</span> -->
                </a>
                {% endfor %}
            </div>
        </div>
    </aside>
</div>
{% endblock %}